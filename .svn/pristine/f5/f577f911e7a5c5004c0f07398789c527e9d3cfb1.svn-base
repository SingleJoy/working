<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.bnsr.edu_yun.frontstage.xbjy.mapper.LessonDesignMapper" >
  <resultMap id="BaseResultMap" type="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="lesson_id" property="lesson_id" jdbcType="BIGINT" />
    <result column="create_time" property="create_time" jdbcType="TIMESTAMP" />
    <result column="user_id" property="user_id" jdbcType="BIGINT" />
    <result column="version_num" property="version_num" jdbcType="INTEGER" />
    <result column="status" property="status" jdbcType="INTEGER" />
  </resultMap>
  <resultMap id="ResultMapWithBLOBs" type="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign" extends="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    <result column="edu_goal" property="edu_goal" jdbcType="LONGVARCHAR" />
    <result column="lesson_divide" property="lesson_divide" jdbcType="LONGVARCHAR" />
    <result column="materials_analysis" property="materials_analysis" jdbcType="LONGVARCHAR" />
    <result column="student_analysis" property="student_analysis" jdbcType="LONGVARCHAR" />
    <result column="strategy_design" property="strategy_design" jdbcType="LONGVARCHAR" />
    <result column="focus_difficulty" property="focus_difficulty" jdbcType="LONGVARCHAR" />
    <result column="media_selection" property="media_selection" jdbcType="LONGVARCHAR" />
    <result column="teaching_process" property="teaching_process" jdbcType="LONGVARCHAR" />
    <result column="typography_design" property="typography_design" jdbcType="LONGVARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    id, lesson_id, create_time, user_id, version_num, status
  </sql>
  <sql id="Blob_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    edu_goal, lesson_divide, materials_analysis, student_analysis, strategy_design, focus_difficulty, 
    media_selection, teaching_process, typography_design
  </sql>
  <select id="selectByPrimaryKey" resultMap="ResultMapWithBLOBs" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    ,
    <include refid="Blob_Column_List" />
    from lesson_design
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    delete from lesson_design
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    <selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into lesson_design (lesson_id, create_time, user_id, 
      version_num, status, edu_goal, 
      lesson_divide, materials_analysis, 
      student_analysis, strategy_design, 
      focus_difficulty, media_selection, 
      teaching_process, typography_design
      )
    values (#{lesson_id,jdbcType=BIGINT}, #{create_time,jdbcType=TIMESTAMP}, #{user_id,jdbcType=BIGINT}, 
      #{version_num,jdbcType=INTEGER}, #{status,jdbcType=INTEGER}, #{edu_goal,jdbcType=LONGVARCHAR}, 
      #{lesson_divide,jdbcType=LONGVARCHAR}, #{materials_analysis,jdbcType=LONGVARCHAR}, 
      #{student_analysis,jdbcType=LONGVARCHAR}, #{strategy_design,jdbcType=LONGVARCHAR}, 
      #{focus_difficulty,jdbcType=LONGVARCHAR}, #{media_selection,jdbcType=LONGVARCHAR}, 
      #{teaching_process,jdbcType=LONGVARCHAR}, #{typography_design,jdbcType=LONGVARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    <selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER" >
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into lesson_design
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="lesson_id != null" >
        lesson_id,
      </if>
      <if test="create_time != null" >
        create_time,
      </if>
      <if test="user_id != null" >
        user_id,
      </if>
      <if test="version_num != null" >
        version_num,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="edu_goal != null" >
        edu_goal,
      </if>
      <if test="lesson_divide != null" >
        lesson_divide,
      </if>
      <if test="materials_analysis != null" >
        materials_analysis,
      </if>
      <if test="student_analysis != null" >
        student_analysis,
      </if>
      <if test="strategy_design != null" >
        strategy_design,
      </if>
      <if test="focus_difficulty != null" >
        focus_difficulty,
      </if>
      <if test="media_selection != null" >
        media_selection,
      </if>
      <if test="teaching_process != null" >
        teaching_process,
      </if>
      <if test="typography_design != null" >
        typography_design,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="lesson_id != null" >
        #{lesson_id,jdbcType=BIGINT},
      </if>
      <if test="create_time != null" >
        #{create_time,jdbcType=TIMESTAMP},
      </if>
      <if test="user_id != null" >
        #{user_id,jdbcType=BIGINT},
      </if>
      <if test="version_num != null" >
        #{version_num,jdbcType=INTEGER},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="edu_goal != null" >
        #{edu_goal,jdbcType=LONGVARCHAR},
      </if>
      <if test="lesson_divide != null" >
        #{lesson_divide,jdbcType=LONGVARCHAR},
      </if>
      <if test="materials_analysis != null" >
        #{materials_analysis,jdbcType=LONGVARCHAR},
      </if>
      <if test="student_analysis != null" >
        #{student_analysis,jdbcType=LONGVARCHAR},
      </if>
      <if test="strategy_design != null" >
        #{strategy_design,jdbcType=LONGVARCHAR},
      </if>
      <if test="focus_difficulty != null" >
        #{focus_difficulty,jdbcType=LONGVARCHAR},
      </if>
      <if test="media_selection != null" >
        #{media_selection,jdbcType=LONGVARCHAR},
      </if>
      <if test="teaching_process != null" >
        #{teaching_process,jdbcType=LONGVARCHAR},
      </if>
      <if test="typography_design != null" >
        #{typography_design,jdbcType=LONGVARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    update lesson_design
    <set >
      <if test="lesson_id != null" >
        lesson_id = #{lesson_id,jdbcType=BIGINT},
      </if>
      <if test="create_time != null" >
        create_time = #{create_time,jdbcType=TIMESTAMP},
      </if>
      <if test="user_id != null" >
        user_id = #{user_id,jdbcType=BIGINT},
      </if>
      <if test="version_num != null" >
        version_num = #{version_num,jdbcType=INTEGER},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="edu_goal != null" >
        edu_goal = #{edu_goal,jdbcType=LONGVARCHAR},
      </if>
      <if test="lesson_divide != null" >
        lesson_divide = #{lesson_divide,jdbcType=LONGVARCHAR},
      </if>
      <if test="materials_analysis != null" >
        materials_analysis = #{materials_analysis,jdbcType=LONGVARCHAR},
      </if>
      <if test="student_analysis != null" >
        student_analysis = #{student_analysis,jdbcType=LONGVARCHAR},
      </if>
      <if test="strategy_design != null" >
        strategy_design = #{strategy_design,jdbcType=LONGVARCHAR},
      </if>
      <if test="focus_difficulty != null" >
        focus_difficulty = #{focus_difficulty,jdbcType=LONGVARCHAR},
      </if>
      <if test="media_selection != null" >
        media_selection = #{media_selection,jdbcType=LONGVARCHAR},
      </if>
      <if test="teaching_process != null" >
        teaching_process = #{teaching_process,jdbcType=LONGVARCHAR},
      </if>
      <if test="typography_design != null" >
        typography_design = #{typography_design,jdbcType=LONGVARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKeyWithBLOBs" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    update lesson_design
    set lesson_id = #{lesson_id,jdbcType=BIGINT},
      create_time = #{create_time,jdbcType=TIMESTAMP},
      user_id = #{user_id,jdbcType=BIGINT},
      version_num = #{version_num,jdbcType=INTEGER},
      status = #{status,jdbcType=INTEGER},
      edu_goal = #{edu_goal,jdbcType=LONGVARCHAR},
      lesson_divide = #{lesson_divide,jdbcType=LONGVARCHAR},
      materials_analysis = #{materials_analysis,jdbcType=LONGVARCHAR},
      student_analysis = #{student_analysis,jdbcType=LONGVARCHAR},
      strategy_design = #{strategy_design,jdbcType=LONGVARCHAR},
      focus_difficulty = #{focus_difficulty,jdbcType=LONGVARCHAR},
      media_selection = #{media_selection,jdbcType=LONGVARCHAR},
      teaching_process = #{teaching_process,jdbcType=LONGVARCHAR},
      typography_design = #{typography_design,jdbcType=LONGVARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Mar 28 10:11:52 CST 2017.
    -->
    update lesson_design
    set lesson_id = #{lesson_id,jdbcType=BIGINT},
      create_time = #{create_time,jdbcType=TIMESTAMP},
      user_id = #{user_id,jdbcType=BIGINT},
      version_num = #{version_num,jdbcType=INTEGER},
      status = #{status,jdbcType=INTEGER}
    where id = #{id,jdbcType=BIGINT}
  </update>
     <select id="queryVersion" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.view.LessonDesignView" resultType="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign">
  	SELECT ld.*
	FROM lesson_design ld
	where 1=1
	<if test="user_id != null" >
	and
	user_id=${user_id}
	</if>
	<if test="lesson_id != null" >
	and
	lesson_id=${lesson_id}
	</if>
	<if test="status != null" >
	and
	status=${status}
	</if>
	order by ld.version_num ${order} limit 0,1
  </select>
  <select id="queryCompare" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.view.LessonDesignView" resultType="cn.bnsr.edu_yun.frontstage.xbjy.po.LessonDesign">
  	SELECT ld.*
	FROM lesson_design ld
	where 1=1
	and
	lesson_id=${lesson_id}
	and
	version_num=${version_num}
	<if test="user_id != null" >
	and
	user_id=${user_id}
	</if>
	</select>
	<select id="queryAll" parameterType="cn.bnsr.edu_yun.frontstage.xbjy.view.LessonDesignView" resultType="cn.bnsr.edu_yun.frontstage.xbjy.view.LessonDesignView">
  	SELECT ld.*,u.realname as username
	FROM lesson_design ld
	left join user u on u.id=ld.user_id
	where 1=1
	and
	ld.lesson_id=${lesson_id}
	and
	ld.version_num IS NOT null
	order by ld.version_num desc
	</select>
</mapper>